<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="/static/css/materialize.min.css" media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="/static/css/style.css" media="screen,projection"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.10.1/css/all.css"
          integrity="sha384-wxqG4glGB3nlqX0bi23nmgwCSjWIW13BdLUEYC4VIMehfbcro/ATkyDsF/AbIOVe" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.12/summernote-lite.css" rel="stylesheet">

    <title>RG - Админ.Панель</title>

</head>
<body>

<header>
    <nav class="blue-grey lighten-1">
        <div class="nav-wrapper container ">
            <a href="/" class="brand-logo">RomanGroup</a>
            <a href="#" data-target="mobile-demo" class="sidenav-trigger right"><i class="material-icons">menu</i></a>
            <ul class="right hide-on-med-and-down">
                <li class=""><a href="/admin/news">СТАТЬИ</a></li>
                <li class="active"><a href="/admin/projects">ПРОЕКТЫ</a></li>
                <li><a href="/admin/social">СОЦ. СЕТИ</a></li>
                <li><a href="/admin/secure">БЕЗОПАСНОСТЬ</a></li>
                <li><a href="/admin/mail">СООБЩЕНИЯ</a></li>
                <li><a href="/admin/logout"><i class="material-icons right">exit_to_app</i>ВЫХОД</a></li>
            </ul>
        </div>
    </nav>

    <ul class="sidenav collection with-header" id="mobile-demo">
        <li class="collection-header"><h4 class="blue-grey-text">RomanGroup</h4></li>
        <li class="collection-item"><a href="/" class="collection-item blue-grey-text">ГЛАВНАЯ</a></li>
        <li class="collection-item"><a href="/admin/news" class="collection-item blue-grey-text">СТАТЬИ</a></li>
        <li class="collection-item blue-grey"><a href="/admin/projects" class="white-text">ПРОЕКТЫ</a></li>
        <li class="collection-item"><a href="/admin/social" class="collection-item blue-grey-text">СОЦ. СЕТИ</a></li>
        <li class="collection-item"><a href="/admin/secure" class="collection-item blue-grey-text">БЕЗОПАСНОСТЬ</a></li>
        <li class="collection-item"><a href="/admin/mail" class="collection-item blue-grey-text">СООБЩЕНИЯ</a></li>
        <li class="collection-item"><a href="/admin/logout" class="collection-item blue-grey-text">ВЫХОД</a></li>
    </ul>
</header>

<main class="content container">

    <section class="section">
        <h4 class="center-align"><b>РЕДАКТИРОВАТЬ ПРОЕКТ</b></h4>


        <form class="blue-grey-text" action="" enctype="multipart/form-data" method="POST">

            <div class="input-field col s12" style="margin-bottom: 2rem; margin-top: 2rem;">
                <input id="name" value="{{ .project.Name }}" name="name" type="text" class="validate">
                <label for="name">Заголовок</label>
            </div>


            <div class="input-field col s12" style="margin-bottom: 1.5rem; margin-top: 1.5rem;">
                <textarea id="description" name="description" class="materialize-textarea" maxlength="200"
                          data-length="200">{{ .project.Description }}</textarea>
                <label for="description">Описание</label>
            </div>


            <div class="file-field input-field" style="margin-bottom: 1.5rem; margin-top: 1.5rem;">
                <div class="btn blue-grey">
                    <span>Фото</span>
                    <input type="file" name="images">
                </div>
                <div class="file-path-wrapper">
                    <input class="file-path validate" placeholder="Выберите фото (максимум 2мб)" type="text">
                </div>
            </div>


            <div class="input-field col s12" style="margin-bottom: 2rem; margin-top: 2rem;">
                <input id="video1" value="{{ .project.Video1.String }}" name="video1" type="text" class="validate">
                <label for="video1">Вставьте ссылку на видео</label>
            </div>

            <div class="input-field col s12" style="margin-bottom: 2rem; margin-top: 2rem;">
                <input id="video2" value="{{ .project.Video2.String }}" name="video2" type="text" class="validate">
                <label for="video2">Вставьте ссылку на видео</label>
            </div>

            <div class="input-field col s12" style="margin-bottom: 2rem; margin-top: 2rem;">
                <input id="video3" value="{{ .project.Video3.String }}" name="video3" type="text" class="validate">
                <label for="video3">Вставьте ссылку на видео</label>
            </div>

            <p class="blue-grey-text">Добавить в избранное:</p>

            <p>
                <label>
                    <input {{ if eq .project.IsFavorite 1 }}checked{{ end }} class="with-gap" name="favorite" value="1"
                           type="radio"/>
                    <span>Избранное 1</span>
                </label>
            </p>

            <p>
                <label>
                    <input {{ if eq .project.IsFavorite 2 }}checked{{ end }} class="with-gap" name="favorite" value="2"
                           type="radio"/>
                    <span>Избранное 2</span>
                </label>
            </p>

            <p>
                <label>
                    <input {{ if eq .project.IsFavorite 3 }}checked{{ end }} class="with-gap" name="favorite" value="3"
                           type="radio"/>
                    <span>Избранное 3</span>
                </label>
            </p>

            <p>
                <label>
                    <input {{ if eq .project.IsFavorite 0 }}checked{{ end }} class="with-gap" name="favorite" value="0"
                           type="radio"/>
                    <span>Не добавлять</span>
                </label>
            </p>


            {{ .csrfField }}

            <div class="col s12 center" style="margin-top: 2rem; margin-bottom: 2rem;">
                <button class="btn blue-grey">сохранить</button>
            </div>


        </form>


    </section>

    <div class="divider" style="margin-top: 1rem; margin-bottom: 1rem;"></div>

    <section class="section">
        {{ $idProject := .project.Id }}
        {{/*        <div class="row card-panel">*/}}
        {{/*        {{ range .project.Photos }}*/}}

        {{/*            <div class="card col s12 m6 l3 z-depth-0">*/}}
        {{/*                <img class="card responsive-img materialboxed" src="/{{ .Src }}" alt="Ooops">*/}}

        {{/*                <a class="btn-floating halfway-fab btn-large waves-effect waves-light blue-grey"*/}}
        {{/*                   href="/admin/projects/{{ $idProject }}/photo/{{ .Id }}/delete"><i*/}}
        {{/*                            class="material-icons large">delete</i></a>*/}}
        {{/*            </div>*/}}

        {{/*        {{ end }}*/}}

        {{/*        </div>*/}}


        <div class="grid">
            <!-- width of .grid-sizer used for columnWidth -->
            <div class="grid-sizer"></div>
            <div class="grid-gutter"></div>
            {{ range .project.Photos }}

                <div class="grid-item card col s12 m6 l3 z-depth-0">
                    <img class="card materialboxed" style="width: 100%;"  src="/{{ .Src }}" alt="Ooops">

                    <a class="btn-floating halfway-fab btn-large waves-effect waves-light blue-grey"
                       href="/admin/projects/{{ $idProject }}/photo/{{ .Id }}/delete"><i
                                class="material-icons large">delete</i></a>
                </div>

            {{ end }}
        </div>


    </section>

    <div class="divider"></div>

    <section class="section">
        <h4 class="center-align"><b>ДОБАВИТЬ ФОТО</b></h4>


        <form enctype="multipart/form-data" style="margin-top: 3rem; margin-bottom: 3rem;"
              action="/admin/project/photo/add" method="post">
            <input type="hidden" name="id" value="{{ .project.Id }}">


            <div class="file-field input-field">
                <div class="btn blue-grey">
                    <span>Галерея</span>
                    <input required type="file" accept="image/jpeg, image/png" name="photos" multiple>
                </div>
                <div class="file-path-wrapper">
                    <input class="file-path validate" type="text" placeholder="Каждая из картинок до 2мб">
                </div>
            </div>

            {{ .csrfField }}

            <div class="col s12 center" style="margin-top: 2rem; margin-bottom: 2rem;">
                <button class="btn blue-grey">добавить</button>
            </div>
        </form>
    </section>

</main>


<footer class="page-footer blue-grey">
    <div class="footer-copyright">
        <div class="container center-align">
            © 2019 RomanGroup
        </div>
    </div>
</footer>


<!--JavaScript at end of body for optimized loading-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script type="text/javascript" src="/static/js/materialize.min.js"></script>

</body>

<script type="text/javascript">

    document.addEventListener('DOMContentLoaded', function () {
        var elems_sidenav = document.querySelectorAll('.sidenav');
        var sidenav = M.Sidenav.init(elems_sidenav, {});

        var elems_materialboxed = document.querySelectorAll('.materialboxed');
        var materialboxed = M.Materialbox.init(elems_materialboxed, {});


    });

    $(document).ready(function () {
        $('textarea#description').characterCounter();

    });


    var grid = $('.grid').imagesLoaded(function () {
        // init Masonry after all images have loaded
        grid.masonry({
            itemSelector: '.grid-item',
            columnWidth: '.grid-sizer',
            gutter: '.grid-gutter',
            percentPosition: true
        });
    });


</script>
</html>